<ion-content [fullscreen]="true" class="pantalla-panel">
  <div class="panel-layout">
    <aside class="sidebar">
      <div class="brand">
        <div class="brand-icon">
          <ion-icon name="football-outline"></ion-icon>
        </div>
        <div>
          <h2><span class="bet">Bet</span><span class="connect">Connect</span></h2>
          <p>APUESTA DURISIMO</p>
        </div>
      </div>

      <nav class="menu">
        <a routerLink="/panel" routerLinkActive="activo" [routerLinkActiveOptions]="{ exact: true }">
          <ion-icon name="grid-outline"></ion-icon>
          <span>Panel</span>
        </a>
        <a routerLink="/liga" routerLinkActive="activo">
          <ion-icon name="football-outline"></ion-icon>
          <span>Liga</span>
        </a>
        <a routerLink="/ranking" routerLinkActive="activo">
          <ion-icon name="stats-chart-outline"></ion-icon>
          <span>Ranking</span>
        </a>
        <a routerLink="/perfil" routerLinkActive="activo">
          <ion-icon name="person-circle-outline"></ion-icon>
          <span>Mi Perfil</span>
        </a>
        <a routerLink="/historial" routerLinkActive="activo">
          <ion-icon name="time-outline"></ion-icon>
          <span>Historial</span>
        </a>
      </nav>

      <div class="sidebar-footer">
        <div class="usuario">
          <img class="usuario-avatar" [src]="avatarUsuario" [alt]="nombreUsuario" />
          <span>{{ nombreUsuario }}</span>
        </div>
        <button type="button" class="btn-salir" (click)="cerrarSesion()">
          <ion-icon name="log-out-outline"></ion-icon>
          Cerrar Sesion
        </button>
      </div>
    </aside>

    <main class="contenido">
      <header class="cabecera">
        <div>
          <h1>Ranking Global</h1>
          <p>TOP JUGADORES</p>
        </div>
      </header>

      @if (cargando) {
        <div class="estado">Cargando ranking...</div>
      }

      @if (!cargando && error) {
        <div class="estado error">
          {{ error }}
          <button type="button" (click)="recargar()">Reintentar</button>
        </div>
      }

      @if (!cargando && !error) {
        <section class="top3">
          @for (user of topTres; track user.id; let i = $index) {
            <article class="podio-card" [class.primero]="i === 0">
              <div class="medalla">#{{ i + 1 }}</div>
              <strong>{{ user.username }}</strong>
              <span>{{ user.points }} pts</span>
            </article>
          }
        </section>

        @if (ranking.length === 0) {
          <div class="estado">No hay jugadores en el ranking.</div>
        }

        @if (ranking.length > 0) {
          <section class="tabla-wrap">
            <table class="tabla">
              <thead>
                <tr>
                  <th>POSICION</th>
                  <th>USUARIO</th>
                  <th>PUNTOS</th>
                </tr>
              </thead>
              <tbody>
                @for (user of ranking; track user.id; let i = $index) {
                  <tr>
                    <td>{{ i + 1 }}</td>
                    <td>{{ user.username }}</td>
                    <td>{{ user.points }}</td>
                  </tr>
                }
              </tbody>
            </table>
          </section>
        }
      }
    </main>
  </div>
</ion-content>
